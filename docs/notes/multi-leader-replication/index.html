<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Multi-Leader Replication</title>
  <meta name="description" content="">
  <link rel="stylesheet" type="text/css" href="https:&#x2F;&#x2F;randominit.xyz&#x2F;base.css">
  


</head>
<body>
  <div id="container">
    <header><a href="https:&#x2F;&#x2F;randominit.xyz"><h1><img id="title_pic" alt="" src="&#x2F;favicon.ico"/>Michael&#x27;s Notes &amp; Blog</h1></a></header>
    <nav>

<a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;"
    class="active">
    Notes
</a>
</nav>
    <main>
<section class="card page">
<h1>Multi-Leader Replication</h1>
<p>A natural extension of the leader-based replication model is to allow more than one node to accepts, which requires Multi-Leader Replication. Within each datacenter, regular leader-follower replication is used; between datacenters, each datacenter's leader replicates
its changes to the leaders in other datacenters.</p>
<h2 id="use-cases-for-multi-leader-replication">Use Cases for Multi-Leader Replication</h2>
<ul>
<li>Multi-datacenter operation
<ul>
<li>Inter-datacenter network delay is hidden from users, thus better perceived performance.</li>
<li>Tolerance of datacenter outages</li>
<li>Tolerance of network problems (traffic between datacenters usually goes over the public internet)</li>
</ul>
</li>
<li>Clients with offline operation</li>
<li>Collaborative-editing</li>
</ul>
<h2 id="handling-write-conflicts">Handling Write Conflicts</h2>
<ul>
<li>Conflict avoidance (writes for a particular record go through the same leader)</li>
<li>Converging toward a consistent state
<ul>
<li>Give each write a unique ID</li>
<li>Give each replica a unique ID</li>
<li>Merge the result together (with application code to resolve the conflict or not)</li>
</ul>
</li>
<li>Custom conflict resolution logic
<ul>
<li>On Write, typically runs in background</li>
<li>On Read, the application may prompt the user or automatically resolve the conflict and write the result back to db.</li>
</ul>
</li>
</ul>
<h2 id="automatic-conflict-resolution">Automatic Conflict Resolution</h2>
<ul>
<li>Conflict-free replicated datatypes</li>
<li>Mergeable persisitent data structures</li>
<li>Oporation transformation</li>
</ul>
<h2 id="multi-leader-replication-topologies">Multi-Leader Replication Topologies</h2>
<ul>
<li>Circular topology (single point of failure)</li>
<li>Star topology (single point of failure)</li>
<li>All-to-all topology (Dependent update arrives before insert issue, use version vectors to solve)</li>
</ul>




</section>
</main>
    <footer>
<div class="card">
Made with <a href="http://getzola.org/">Zola</a>, static site generator in <a href="https://www.rust-lang.org/">Rust</a>.
</div>
<div id="license"></div>
<br>
</footer>
  </div>
</body>
</html>
