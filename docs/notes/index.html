<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Notes</title>
  <meta name="description" content="Theme for Zola inspired from Pelican website theme">
  <link rel="stylesheet" type="text/css" href="https://randominit.xyz/base.css">
  
</head>
<body>
  <div id="container">
    <header><a href="https:&#x2F;&#x2F;randominit.xyz"><h1><img id="title_pic" alt="" src="&#x2F;favicon.ico"/>Michael&#x27;s Notes &amp; Blog</h1></a></header>
    <nav>

<a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;"
    class="active">
    Notes
</a>
</nav>
    <main>



  
  
  
  <section class="card preview">
      <div class="date">2021-07-22T11:04:00</div>
      <h1><a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;consistency-and-consensus&#x2F;">Consistency and Consensus</a></h1>
      <div>Consistency Guarantees
Eventual consistency (convergence)
Linearizability (make a system appear as if there were only one copy of the data, and all operations on it are atomic)
example - alice has seen the result of a game, while later bob sees that they are still playing, because they are reading from 2 different replicas
What Makes a System Linearizable

If a read request is concurrent with a write request, it may return either the old or the new value.
After any one read has returned the new value, all following reads (on the same or other clients) must also return the new value.
The requirement of linearizability is that the lines joining up the operation markers always move forward in time (from left to right), never backward. 

Linearizability Versus Serializability

Serializability is an isolation nproperty of transacitons, where every transaction may read and write multiple objects
Linearizability is a recency guarantee on reads and writes of a register (an individual object). …</div> 
  </section>
  




<section class="card feed">
  


  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;zookeeper&#x2F;" class="feed-link">
    <div>
      <div class="date">2021-07-14T14:15:00</div>
      <h3>ZooKeeper notes</h3>
      <p>
        
          ZooKeeper
Key Words:

group messaging
shared registers
distributed lock service
wait-free
manipulates simple wait-free data objects organized hierarchically as in file systems
Zab (leader-based atomic broadcast protocol) to provide linearizability
relaxed consistency guarantees
watch
A-linearizabili… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;transactions&#x2F;" class="feed-link">
    <div>
      <div class="date">2021-06-12T20:49:00</div>
      <h3>Transactions</h3>
      <p>
        
          Transactions
ACID
Atomicity

Abortability, implemented using write ahead log

Consistency

Satisfy application defined invariant

Isolation

Different isolation levels

Durability
Atomic operations on single object

compare and set
atomic increment

Isolation Levels
Read committed
Properties

no dir… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;raft&#x2F;" class="feed-link">
    <div>
      <div class="date">2021-06-01T20:14:00</div>
      <h3>Raft Notes</h3>
      <p>
        
          Rules for Servers
All Servers

If commitIndex &amp;gt; lastApplied: increment lastApplied, apply log[lastApplied] to statemichine
if RPC request or response contains term T &amp;gt; currentTerm: set currentTerm = T, convert to follower

Followers

Respond to RPCs from candidates and leaders
If election time… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;rust-union-find&#x2F;" class="feed-link">
    <div>
      <div class="date">2021-02-02</div>
      <h3>Basic Union Find in Rust</h3>
      <p>
        
             fn find(g: &amp;mut Vec, i: usize) -&gt; usize {
        if g[i] != i {
            g[i] = Self::find(g, g[i]);
            g[i]
        } else {
            i 
        }
    }
    fn union_fn(g: &amp;mut Vec, s: &amp;mut Vec, i: usize, j: usize) {
        let i = Self::find(g, i);
        let j = Self::find(g,… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;store-aws-iot-device-shadow-data-to-dynamo&#x2F;" class="feed-link">
    <div>
      <div class="date">2021-02-02</div>
      <h3>Get Data From AWS IoT Device Shadow and Store In Dynamodb</h3>
      <p>
        
          We need to implement an IoT platform on AWS, and we will be using device shadows to communicate between device
and other parts such as Apps. One requirement for the plotform is that we need to access historic data.
My plan is that I&#x27;m going to create a Rule that reads from device shadows and store d… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;rust-async-notes&#x2F;" class="feed-link">
    <div>
      <div class="date">2021-01-12</div>
      <h3>Rust Async Notes</h3>
      <p>
        
          Due to the nature of notes, the content of this notes would be ustructured
.await ing on a Multithreaded Executor 
Future may move between threads, so any variables used in async
bodies must be able to travel between threads. So it is not safe to use Rc, RefCell or any other types that don&#x27;t impleme… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;atomic-field-updaters&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-12-30</div>
      <h3>Atomic field updaters</h3>
      <p>
        
          Field updaters are essentially used as &amp;quot;wrappers&amp;quot; around a volatile field
(primitive or object reference). They are generally used when one or both of the following are true:

You generally want to refer to the variable &amp;quot;normally&amp;quot; (that is, without having to always refer to it vi… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;reentrantlock&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-12-30</div>
      <h3>ReentrantLock in Java</h3>
      <p>
        
          The advantage if ReentrantLock over intrinsic Lock

The thread waiting to acquire a lock can be interrupted if lockInterruptibly() is used
A timeout can be set by using tryLock()
Hand-over-Hand Locking is possible which enables efficient concurrent access on data structures like linked list
Conditio… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;things-to-avoid-when-using-locks&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-12-29T10:00:00</div>
      <h3>Tips on  Using Locks</h3>
      <p>
        
          The content of this note is from the book &amp;quot;Seven Concurrency Models in Seven Weeks&amp;quot;
Do Not Use an Object&#x27;s Hash to Order Locks
One piece of advice you&#x27;ll often see is to use an object&#x27;s hash code to order lock
acquisition, such as shown here:
if (System.identityHashCode(left) 
The issue is… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;correct-double-locking-pattern&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-12-29</div>
      <h3>Correct Way to Do Double Locking</h3>
      <p>
        
          class Foo {
    private volatile Helper helper = null;
    public Helper getHelper() {
        Helper result = helper;
        if (result == null) {
            synchronized(this) {
                result = helper;
                if (result == null) {
                    helper = result = new Helpe… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;java-memory-model&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-12-29</div>
      <h3>Java Memory Model</h3>
      <p>
        
          How do final fields work under the new JMM?
Assuming the object is constructed &amp;quot;correctly&amp;quot;, once an object is constructed, the
values assigned to the final fields in the constructor will be visible to all
other threads without synchronization. In addition, the visible values for any
other … 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;safe-construction-techniques&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-12-29</div>
      <h3>Safe construction techniques</h3>
      <p>
        
          Don&#x27;t publish the &amp;quot;this&amp;quot; reference during construction
public class EventListener {
    public EventListener(EventSource eventSource) {
        &#x2F;&#x2F; do our initialization
        ...
        &#x2F;&#x2F; register ourselves with the event source
        eventSource.registerListener(this);
    }
}

Even… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;high-performance-python&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-08-10T14:53:00</div>
      <h3>High Performance Python</h3>
      <p>
        
          High Performance Python
Benchmarking &amp;amp; Profiling
Test &amp;amp; Benchmarking

tiem command
timeit module in Python
pytest-benchmark
timeit as a decorator
timeit as a context manager

Find Bottlenecks

cProfile
line_profiler
memory_profiler

Threads Synchronization
Synchronization primitives

join
Lo… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;python-threads&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-08-09T20:31:00</div>
      <h3>Threads in Python</h3>
      <p>
        
          Threads in Python
Types of OS threads

POSIX
Windows

user threads models

1 - 1
M - 1
M - N

States


New


Runnable


Running


Not runnable


Dead


Create threads

threading.Thread
Inherit Thread class
fork

Apis

setDaemon(True)
threading.current_thread()
threading.main_thread()
threading.enume… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;partitioning&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-08-09</div>
      <h3>Partitioning</h3>
      <p>
        
          





Markmap

* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}




((t,a,e,n)=&gt;{const{Markmap:o,loadPlugins:s}=window.markmap;(a?a(s,e,n):Promise.resolve()).then(()=&gt;{o.create(&quot;svg#mindmap&quot;,null,t)})})({&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;v&quot;:&quot;Partitioning&quot;,&quot;c&quot;:[{&quot;t&quot;… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;ordering-guarantees&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-07-29T16:15:05</div>
      <h3>Ordering Guarantees</h3>
      <p>
        
          Ordering and Causality

The causal order is not a total order
Linearizability is stronger than causal consistency

Causal consistency is the strongest possible consistency model that does not slow down due to network delays,
and remains available in the face of network failures.

Sequence Number Ord… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;linearizability&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-07-29T15:33:05</div>
      <h3>Linearizability</h3>
      <p>
        
          What is linearizability? The basic idea is make a system appear as if there were only one copy of the data,
and all operations on it are atomic.
What makes a system linerizable

Read operation completes before a write operation begins, must return the old value
Read operation begins after a write op… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;leader-based-replication&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-07-09T17:24:05</div>
      <h3>Leader Based Replication</h3>
      <p>
        
          In Leader Based Replication, one node is designated as the leader, which receives write requests from clients, writes the new data to its local storage and also sends the data to all of its followers.
Synchronous Versus Asychronous Replication

Synchronous

Advantage: The follower is guaranteed to h… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;multi-leader-replication&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-07-09T16:55:05</div>
      <h3>Multi-Leader Replication</h3>
      <p>
        
          A natural extension of the leader-based replication model is to allow more than one node to accepts, which requires Multi-Leader Replication. Within each datacenter, regular leader-follower replication is used; between datacenters, each datacenter&#x27;s leader replicates
its changes to the leaders in ot… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;column-oriented-storage&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-07-03T20:22:00</div>
      <h3>Column-Oriented Storage</h3>
      <p>
        
          What is Column-Oriented Storage? In Contrast to Row-Oriented Storage, each column of data is stored in
a seperate file, and all the column files store rows in the same order.
Column Compression
Values in a column often look quite repetitive, so they can be compressed.
Bitmap Encoding
we can take a c… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;sstables-and-lsm-trees&#x2F;" class="feed-link">
    <div>
      <div class="date">2020-07-02T17:54:00</div>
      <h3>SSTables and LSM-Trees</h3>
      <p>
        
          SSTables and LSM-Trees
SStable stands for Sorted String Table, in which key sequence of key-value pairs is sorted by key.

A compaction process is running in the background to merge SSTables and remove old values of keys. mergesort is used.
In memory index is sparse, keys between two consecutive ind… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;home-directoy-is-full&#x2F;" class="feed-link">
    <div>
      <div class="date">2019-12-10T12:07:00</div>
      <h3>Manage Home Directory</h3>
      <p>
        
          We share GPU box and we use anaconda to manage our Python environments these days. Then sooner or
later we&#x27;ll encounter the issue that the home directory of the box is full. In this case, we can
use the following procedure to solve the problem
cd ~
# Find out which file or directory uses the most sp… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;ocr-summary&#x2F;" class="feed-link">
    <div>
      <div class="date">2019-12-09T16:33:05</div>
      <h3>OCR Summary</h3>
      <p>
        
          Service Providers &amp;amp; Libraries
Service Providers

Alibaba (Table Recognition &amp;amp; Recognition based on custom templates)
Google (Text Detection &amp;amp;&amp;amp; Document Text Detection, table recognition in alpha phase)
Amazon: (Textract, with table recognition capability)
[ABBYY]:
Ocrolus

Open Sourc… 
        
      </p>
    </div>
  </a>

  <a href="https:&#x2F;&#x2F;randominit.xyz&#x2F;notes&#x2F;tablebank&#x2F;" class="feed-link">
    <div>
      <div class="date">2019-12-05</div>
      <h3>Table Detection</h3>
      <p>
        
          I am currently working on table detection and I will use this post to keep a memo of things I learned
in the process
System Requirement
I finally installed detectron successfully, but I think that use a prebuilt docker image is the easiest way to get started, a Dockerfile is located in the docker fo… 
        
      </p>
    </div>
  </a>


</section>


</main>
    <footer>
<div class="card">
Made with <a href="http://getzola.org/">Zola</a>, static site generator in <a href="https://www.rust-lang.org/">Rust</a>.
</div>
<div id="license"></div>
<br>
</footer>
  </div>
</body>
</html>
